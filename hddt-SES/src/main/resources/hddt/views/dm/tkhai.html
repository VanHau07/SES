<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
	layout:decorate="~{layout/layout-main}">
<body>
	<th:block layout:fragment="content">
		<div class="row page-titles">
			<div class="col-md-12 col-12 align-self-center p-l-0">
				<h3 class="text-themecolor m-b-0 m-t-0 text-uppercase">Danh sách tờ khai</h3>
			</div>
		</div>
		<div class="row">
			<div class="col-12">
				<form id="f-tkhai" name="f-tkhai" method="post" enctype="multipart/form-data" >
					<div class="card">
						<div class="card-body">
							
							<div class="row" th:if="false"><div class="col-12"><hr style="margin: 0 0 10px 0" /></div></div>
							<div class="col-12">
								<div class="row mT-0">
									<div class="col-12 col-sm-6 p-l-0">
										<!-- <p class=" inline p-0 download-support__ses--wrap text-info m-b-0">
                            				<i class="fa fa-download"></i><a class="download download-support__ses" href="javascript:void(0);" data-type="SignPlugin" onclick="DownloadFile('SES invoice Sign.msi')">Tải phần mềm hỗ trợ ký số</a>
                            			</p> -->
                            		</div>
                            		<div class="col-12 col-sm-6 text-right p-r-0 p-l-0">
                            			<div class="button-group text-right">
                            				<button type="button" title="Thêm mới" data-action="tkhai-cre" class="btns btns-add__ses hover-up__ses" th:if="${#strings.contains(UserFullPathRight,'|tkhai-cre|')}" >
                            					<i class="mdi mdi mdi-plus-circle-outline"> </i><span class="d-none d-md-inline">Thêm mới</span>
                            				</button>
                            				<button type="button" title="Chi tiết" data-action="tkhai-detail" class="btns btns-detail__ses hover-up__ses" th:if="${#strings.contains(UserFullPathRight,'|tkhai-detail|')}" th:disabled="true" >
                            					<i class="mdi mdi-information-outline"></i> <span class="d-none d-md-inline">Chi tiết</span>
                            				</button>
<!--                             				<button type="button" title="Thay đổi" data-action="tkhai-edit" class="btns btns-edit__ses hover-up__ses" th:if="${#strings.contains(UserFullPathRight,'|tkhai-edit|') && false}" th:disabled="true" > -->
                            				<button type="button" title="Thay đổi" data-action="tkhai-edit" class="btns btns-edit__ses hover-up__ses" th:if="${#strings.contains(UserFullPathRight,'|tkhai-edit|')}" th:disabled="true" >
                            					<i class="mdi mdi-tooltip-edit"> </i> <span class="d-none d-md-inline">Thay đổi</span>
                            				</button>
                            				<button type="button" title="Ký tờ khai" data-action="tkhai-sign" class="btns btns-export__ses hover-up__ses" th:if="${#strings.contains(UserFullPathRight,'|tkhai-sign|')}" th:disabled="true" >
                            					<i class="mdi mdi-account-check-outline"> </i><span class="d-none d-md-inline">Ký tờ khai</span>
                            				</button>
                            				<button type="button" title="Xóa" data-action="tkhai-del" class="btns btns-delete__ses hover-up__ses" th:if="${#strings.contains(UserFullPathRight,'|tkhai-del|') && false}" th:disabled="true" >
                            					<i class="mdi mdi-close-box"> </i> <span class="d-none d-md-inline">Xóa</span>
                            				</button>
                            				
                            			</div>
                            		</div>
                            	</div>
                            </div>
                            
							<div class="form-group row m-b-5 m-t-7" >
	           					<div class="col-12 has-min-height-grid">
	           						<div id="grid" ></div>
	           					</div>
	           				</div>
						</div>
					</div>
				</form>
			
				<script type="text/javascript">
				_gridMain = $('#f-tkhai').find('#grid');
				</script>
				<script th:src="@{/static/function/dm/tkhai.js(v=1.16) }"></script>
				<script type="text/javascript">
			function DownloadFile(fileName) {
				//Set the File URL.
				var url = ROOT_PATH + "/static/sign-msi/" + fileName;

				//Create XMLHTTP Request.
				var req = new XMLHttpRequest();
				req.open("GET", url, true);
				req.responseType = "blob";
				req.onload = function() {
					//Convert the Byte Data to BLOB object.
					var blob = new Blob([ req.response ], {
						type : "application/octetstream"
					});

					//Check the Browser type and download the File.
					var isIE = false || !!document.documentMode;
					if (isIE) {
						window.navigator.msSaveBlob(blob, fileName);
					} else {
						var url = window.URL || window.webkitURL;
						link = url.createObjectURL(blob);
						var a = document.createElement("a");
						a.setAttribute("download", fileName);
						a.setAttribute("href", link);
						document.body.appendChild(a);
						a.click();
						document.body.removeChild(a);
					}
				};
				req.send();
			};
		</script>
			</div>
		</div>
	</th:block>
</body>