<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
		xmlns:th="http://www.thymeleaf.org"	
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" >
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <link rel="shortcut icon" type="image/png" sizes="16x16" th:href="@{/favicon.ico}" >
    <title th:text="${_header}">Tra cứu hóa đơn</title>
    <link rel="canonical" href="https://www.wrappixel.com/templates/materialpro/">
    
    <!-- Bootstrap Core CSS -->
    <link th:href="@{/static/assets/plugins/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700">
    <link th:href="@{/static/css/icons/font-awesome/css/fontawesome-all.css}" rel="stylesheet">
	<link th:href="@{/static/css/icons/simple-line-icons/css/simple-line-icons.css}" rel="stylesheet">
	<link th:href="@{/static/css/icons/weather-icons/css/weather-icons.min.css}" rel="stylesheet">
	<link th:href="@{/static/css/icons/linea-icons/linea.css}" rel="stylesheet">
	<link th:href="@{/static/css/icons/themify-icons/themify-icons.css}" rel="stylesheet">
	<link th:href="@{/static/css/icons/flag-icon-css/flag-icon.min.css}" rel="stylesheet">	    
    <link th:href="@{/static/css/icons/material-design-iconic-font/css/materialdesignicons.min.css}" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700">
    <link th:href="@{/static/css/spinners.css}" rel="stylesheet">
    <link th:href="@{/static/css/animate.css}" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link th:href="@{/static/css/style.css(v=1.7)}" rel="stylesheet">
    <!-- You can change the theme colors from here -->
    <link th:href="@{/static/css/colors/blue.css}" id="theme" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
	
	<!-- All Jquery -->
    <!-- ============================================================== -->
    <script th:src="@{/static/assets/plugins/jquery/jquery.min.js}"></script>
	
	<link th:href="@{/static/css/style-util.css}" rel="stylesheet">
	<link th:href="@{/static/css/style-admin.css}" rel="stylesheet">
	<link th:href="@{/static/css/style-admin-custom.css(v=1.5)}" rel="stylesheet">
	
	<link th:href="@{/static/css/style.custom.css}" rel="stylesheet">
	
	<link th:href="@{/static/assets/alertify/alertify.min.css}" rel="stylesheet">
	<script th:src="@{/static/assets/alertify/alertify.min.js}"></script>
</head>
<body>
	<!-- ============================================================== -->
    <!-- Preloader - style you can find in spinners.css -->
    <!-- ============================================================== -->
    <div class="preloader" style="opacity: 0.5"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle> </svg></div>
    <!-- ============================================================== -->
    <!-- Main wrapper - style you can find in pages.scss -->
    <!-- ============================================================== -->
    <section id="wrapper" >
<!--         <div class="login-register" style="background-image:url(../assets/images/background/login-register.jpg);"> -->
 <div class="col-12 main-wrapper">
        <div class="row">
          <div class="col-12 col-sm-12 col-md-5 col-lg-5 login-ses__wrap--km">
            <div class="blogs-main">
             
             
            
              <div class="blogs-list" th:each="l: ${TinWebL}">
                <div class="blogs-wrap">
                  <div class="blogs-icon">
                    <i class="fa fa-certificate m-r-5"></i>
                  </div>
                  <div class="blogs-wrap__main">
                    <a class="blogs-wrap__heading" href="javascript:void(0);">
                      <span>[[${l.Chude}]]</span>
                    </a>
                    <p class="blogs-wrap__desc">
                   [[${l.Tieude} ]]
                    </p>
                    <a
                      class="blogs-wrap__cta"
                    th:href="@{${l.Link}}"
                      target="blank"
                      ><span>Xem chi tiết</span></a
                    >
                  </div>
                </div>
              </div>

        
          
          
          
          
          
            </div>
          </div>
          <div class="col-12 col-sm-12 col-md-7 col-lg-4 login-ses__wrap--box">
           <div class="login-box card">
                <div class="card-body">
                	<form class="form-horizontal form-material authform" id="loginform" th:action="@{/authenticate}" method="post" enctype="application/x-www-form-urlencoded">
						<div class="form-logo__head text-center">
              <img th:src="*{'data:realCaptcha/jpg;base64,'+ LOGO }" />
              </div>
              <h3 class="box-title m-b-20 text-uppercase font-bold text-center">
                Tra cứu hđđt
              </h3>
						<div class="form-group ">
							<div class="col-xs-12">
								<input name="kh-mst" class="form-control" type="text" placeholder="MST người mua" readonly="readonly" autocomplete="off" > 
							</div>
						</div>
						<div class="form-group ">
							<div class="col-xs-12">
								<input name="shdon" class="form-control" type="text" placeholder="Số hóa đơn" readonly="readonly" autocomplete="off" > 
							</div>
						</div>
						<div class="form-group ">
							<div class="col-xs-12">
								<input name="secure-key" class="form-control" type="text" placeholder="Mã số bí mật" readonly="readonly" autocomplete="off" > 
							</div>
						</div>
						<div class="form-group m-b-0">
							<div class="col-xs-12">
								<label class="custom-control custom-checkbox d-inline-block m-r-10 m-b-0">
									<input type="checkbox" name="chk-hd-convert" class="custom-control-input" /><span class="custom-control-label p-t-5">In hóa đơn chuyển đổi</span>
								</label>
							</div>
						</div>
							<div class="form-group m-b-0">
							<div class="col-xs-12">
								<label class="custom-control custom-checkbox d-inline-block m-r-10 m-b-0">
									<input type="checkbox" name="chk-tncn" class="custom-control-input" /><span class="custom-control-label p-t-5">In chứng từ khấu trừ thuế</span>
								</label>
							</div>
						</div>
						<div class="form-group text-center m-t-10">
							<div class="col-xs-12">
								<button class="btn btn-info btn-lg btn-block text-uppercase waves-effect waves-light p-t-4 p-b-4" data-action="view-pdf" type="button">Xem hóa đơn</button>
								<button class="btn btn-warning btn-lg btn-block text-uppercase waves-effect waves-light p-t-4 p-b-4" data-action="download-xml" type="button">Tải file XML</button>
							</div>
						</div>
						
					</form>
					<script>
					$(document).ready(function(event) {
						setTimeout(function(){
							$('.authform').find('input[name="kh-mst"], input[name="shdon"], input[name="secure-key"]').prop('readonly', false);
						}, 1000);
					
						$('.authform').find('button[data-action]').click(function (event) {
							event.preventDefault();/*event.stopPropagation();*/
							var dataAction = $(this).data('action');
							
							var $obj = $(this);
							
							var khmst = $('.authform').find('input[name="kh-mst"]').val().trim();
							var shdon = $('.authform').find('input[name="shdon"]').val().trim();
							var securekey = $('.authform').find('input[name="secure-key"]').val().trim();
							
							var objData = {};
							switch(dataAction){
							case 'view-pdf':
							case 'download-xml':
								if(shdon == '' || securekey == ''){
									alertDLSuccess('<span class="required">Vui lòng nhập đầy đủ số hóa đơn và mã số bí mật.</span>', function(){});
									return;
								}
								
								objData = {};
								objData['action'] = dataAction;
								objData['khmst'] = khmst;
								objData['shdon'] = shdon;
								objData['securekey'] = securekey;
								objData['isconvert'] = $('.authform').find('input[name="chk-hd-convert"]').prop('checked')? 'Y': 'N';
								objData['isTNCN'] = $('.authform').find('input[name="chk-tncn"]').prop('checked')? 'Y': 'N';
								
								
								window.open(ROOT_PATH + '/tracuuhd/' + encodeObjJsonBase64UTF8(objData),'_blank');
								break;
							default:
								break;
							}
						});					
					});
					</script>
                </div>
            </div>
          </div>
          <div class="col-12 col-sm-12 col-md-12 col-lg-3 login-ses__wrap--sp">
            <div class="support-list">
            
            
            
           
           
             <div class="support-card"th:each="r: ${TinWebR}">
                <p class="text-uppercase support-wrap">
                  <i class="fa fa-certificate m-r-5"></i>
                  <span class="support-wrap__title">[[${r.Chude}]]</span>
                </p>
                <p class="_700 m-b-xs support-item support-data">
                  <a class="text-dark _600" 
                   th:utext="${r.Noidung}" >
                    </a>
                </p>

              
              </div>
         
          
          
          
          
          
          
          
          
            </div>
          </div>
        </div>
      </div>
           
    </section>
    
    <!-- ============================================================== -->
    <!-- End Wrapper -->
    <!-- ============================================================== -->
    <!-- Bootstrap tether Core JavaScript -->
	    <script th:src="@{/static/assets/plugins/popper/popper.min.js}"></script>
	    <script th:src="@{/static/assets/plugins/bootstrap/js/bootstrap.min.js}"></script>
	    <!-- slimscrollbar scrollbar JavaScript -->
	    <script th:src="@{/static/js/jquery.slimscroll.js}"></script>
	    <!--Wave Effects -->
	    <script th:src="@{/static/js/waves.js}"></script>
	    <!--Menu sidebar -->
	    <script th:src="@{/static/js/sidebarmenu.js}"></script>
	    <!--stickey kit -->
	    <script th:src="@{/static/assets/plugins/sticky-kit-master/dist/sticky-kit.min.js}"></script>
	    <script th:src="@{/static/assets/plugins/sparkline/jquery.sparkline.min.js}"></script>
	    <!--Custom JavaScript -->
<!-- 	    <script th:src="@{/js/custom.min.js}"></script> -->
		<script th:src="@{/static/js/customs.js(v=0.5)}"></script>
	    <!-- ============================================================== -->
	    <!-- Style switcher -->
	    <!-- ============================================================== -->
	    <script th:src="@{/static/assets/plugins/styleswitcher/jQuery.style.switcher.js}"></script>
	    
	    <script th:src="@{/static/js/base64.js}"></script>
	    <script th:src="@{/static/js/custom.hddt.js}"></script>
    <script>
    ROOT_PATH = '[[${#httpServletRequest.getContextPath()}]]';
	_csrf_value = '[[${_csrf.token}]]';_csrf_name = '[[${_csrf.parameterName}]]';
    </script>
</body>